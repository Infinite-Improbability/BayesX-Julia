<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage ¬∑ BayesJ</title><meta name="title" content="Usage ¬∑ BayesJ"/><meta property="og:title" content="Usage ¬∑ BayesJ"/><meta property="twitter:title" content="Usage ¬∑ BayesJ"/><meta name="description" content="Documentation for BayesJ."/><meta property="og:description" content="Documentation for BayesJ."/><meta property="twitter:description" content="Documentation for BayesJ."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">BayesJ</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../setup/">Setup</a></li><li class="is-active"><a class="tocitem" href>Usage</a></li><li><a class="tocitem" href="../models/">Cluster Models</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../public/">Public</a></li><li><a class="tocitem" href="../private/">Internals</a></li></ul></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Usage</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Infinite-Improbability/BayesX-Julia" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Infinite-Improbability/BayesX-Julia/blob/main/docs/src/usage.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h1><p>We&#39;ll going to walkthrough the construction of an analysis script like in <code>examples/example.jl</code>.</p><p>First we need to import our dependencies.</p><pre><code class="language-julia hljs">using BayesJ
using Unitful, DimensionfulAngles</code></pre><p>If you want to enable debug output add</p><pre><code class="language-julia hljs">ENV[&quot;JULIA_DEBUG&quot;] = &quot;BayesJ&quot;</code></pre><p>Now we want to load our data. Loading data from a Chandra-style events file is recommended but you can also try <a href="../public/#BayesJ.PlaintextData"><code>PlaintextData</code></a></p><pre><code class="language-julia hljs">data = FITSData(
    &quot;data/tng/tng_projections/tng_s67_h11_x_obs_evt.fits&quot;,
    &quot;data/tng/tng_projections/tng_s67_h11_x_bg.fits&quot;,
    &quot;data/tng/acisi_aimpt_cy0.arf&quot;,
    &quot;data/tng/acisi_aimpt_cy0.rmf&quot;,
    0.492u&quot;arcsecond·µÉ&quot;
)</code></pre><p>Here we have the source and background events, the ARF and RMF and the pixel size. The fancy <code>·µÉ</code> in the units for the pixel size denotes a dimensionful angle. You can get it by typing <code>\^a</code> in the Julia REPL (or VSCode if you have the Julia extension).</p><p>Now we want to define our priors.</p><pre><code class="language-julia hljs">priors_nfw = [
    UniformPrior(&quot;x0&quot;, -100.0, 100.0),
    UniformPrior(&quot;y0&quot;, -100.0, 100.0),
    UniformPrior(&quot;MT_500&quot;, 1.0e14, 1.0e15),
    NormalPrior(&quot;fg_500&quot;, 0.13, 0.01),
    UniformPrior(&quot;c_500&quot;, 3.0, 10.0),
    DeltaPrior(&quot;a&quot;, 1.0510),
    DeltaPrior(&quot;b&quot;, 5.4905),
    DeltaPrior(&quot;c&quot;, 0.3081),
    DeltaPrior(&quot;c_500_GNFW&quot;, 1.177)
]</code></pre><p>The first two priors should always be called <code>x0</code> and <code>y0</code> (or x and y). They denote the cluster centre position. Other priors can be named whatever you like. These should be one prior for every positional argument to the cluster model. Currently supported priors are <a href="../public/#BayesJ.DeltaPrior"><code>DeltaPrior</code></a>, <a href="../public/#BayesJ.LogUniformPrior"><code>LogUniformPrior</code></a>, <a href="../public/#BayesJ.NormalPrior"><code>NormalPrior</code></a>,<a href="../public/#BayesJ.UniformPrior"><code>UniformPrior</code></a> and <a href="../public/#BayesJ.GenericPrior"><code>GenericPrior</code></a>, which can use arbitary distributions.</p><p>Finally we call <a href="../public/#BayesJ.sample-Tuple{BayesJ.Dataset, Tuple{var&quot;#s12&quot;, var&quot;#s12&quot;} where var&quot;#s12&quot;&lt;:(Union{Unitful.Quantity{T, ùêã^2 ùêå ùêì^-2, U}, Unitful.Level{L, S, Unitful.Quantity{T, ùêã^2 ùêå ùêì^-2, U}} where {L, S}} where {T, U}), Function, AbstractVector{&lt;:BayesJ.Prior}, Union{Unitful.Quantity{T, ùêã^-2, U}, Unitful.Level{L, S, Unitful.Quantity{T, ùêã^-2, U}} where {L, S}} where {T, U}, Real, Tuple{var&quot;#s10&quot;, var&quot;#s10&quot;} where var&quot;#s10&quot;&lt;:Real, Tuple{var&quot;#s9&quot;, var&quot;#s9&quot;} where var&quot;#s9&quot;&lt;:Real}"><code>sample</code></a>.</p><pre><code class="language-julia hljs">sample(
    data, # our FITSData
    (0.3u&quot;keV&quot;, 4.0u&quot;keV&quot;), # (minimum energy, maximum energy)
    Model_NFW, # model function
    priors_nfw, # list of prior objects
    0.022e22u&quot;cm^-2&quot;, # hydrogen column density
    0.5, # redshift
    (1900, 2800), # bounds on x in physical pixels
    (1900, 2800); # bounds on y in phyiscal pixels
    # everything below is optional
    bin_size=10, # bin size of spatial pixels (along each axis)
    centre_radius=0, # binned pixel radius around centre that will be excluded
    use_interpolation=false, # use interpolation in MEKAL emission calculations. Memory hungry
    use_stepsampler=false, # use stepsampler to improve efficency
    mask=&quot;data/tng/wavedetect.reg&quot; # path to ciao style mask file. Ellipses only.
)</code></pre><p>The available models are described in <a href="../models/#cluster_models_page">Cluster Models</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../setup/">¬´ Setup</a><a class="docs-footer-nextpage" href="../models/">Cluster Models ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Monday 8 January 2024 05:37">Monday 8 January 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
